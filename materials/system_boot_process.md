# Загрузка системы
### Основные этапы загрузки

Когда вы включаете компьютер, начинается последовательный процесс запуска, в котором участвуют как аппаратные, так и программные компоненты. Вот как это происходит:

**1. BIOS/UEFI**

После включения ПК процессор обращается к прошивке BIOS или UEFI. Здесь происходит проверка оборудования (POST) и выбор загрузочного устройства (жёсткого диска, флешки, SSD и т. д.).

**2. MBR или GPT**

На выбранном устройстве BIOS/UEFI ищет MBR (Master Boot Record) или GPT (GUID Partition Table), где находится первый загрузчик.

**3. Загрузчик (Bootloader)**

Он может быть простым или сложным. Например:
- Может сразу загрузить ядро ОС.
- Может передать управление другому загрузчику (chainloading).

**4. Ядро и initramfs**

Загрузчик передаёт управление ядру ОС и загрузочному образу в оперативную память (initramfs).
Эти элементы содержат всё необходимое для запуска операционной системы: модули, драйверы и начальные конфигурации.
5. Инициализация ОС

Ядро инициализирует устройства и запускает процессы системы, включая службы и демоны, настраивая готовую к работе ОС.
****

Утилиты и команды, которые нужно знать

1. dmesg

Позволяет просматривать события загрузки системы. Например:
```
dmesg | less
```
2. journalctl

Команда для работы с логами в системах с systemd. Например:
```
journalctl -b 0
```
(показывает события текущей загрузки)

3. Файлы логов
- `/var/log/dmesg` — сохраняет информацию о загрузке системы
- `/var/log/boot.log` - логи загрузочных процессов
****
### Загрузчики
Наиболее распространённые загрузчики:

- Grub — поддерживает сложные конфигурации и несколько ОС.
- LILO — устаревший, но всё ещё встречается.
- NTLDR — для Windows.

Команды и параметры, с которыми вы можете столкнуться в Grub:

- uuid — идентификатор раздела с ОС.
- kernel — путь к ядру ОС.
- initrd — путь к образу initramfs.
- quiet — скрыть вывод процесса загрузки.
- splash — отображать заставку.
****

Стили инициализации

1. SysVinit

Классическая система, использующая уровни запуска (runlevel).

2. Systemd

Современный и более быстрый подход. Запускает задачи параллельно, сокращая время загрузки.

3. Upstart

Система инициализации, основанная на событиях. Использовалась в некоторых версиях Ubuntu.